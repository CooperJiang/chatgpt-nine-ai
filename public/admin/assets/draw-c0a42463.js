
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{_ as F}from"./index-56b33bff.js";import{A as D}from"./chat-37adc300.js";import{d as $,r as _,Q as J,x as Q,o,c,e as a,f as t,N as f,R as v,b as I,k as g,w as W,I as d,a as U,Y as X,h as s,X as Y,t as h,J as A,E as G,q as S}from"./index-be23d7e6.js";import{R as H,D as K}from"./index-68385382.js";const Z={class:"flex draw_container"},ee={class:"flex mt-3 justify-between items-center"},le=$({__name:"draw",setup(ae){const p=_(!1),b=_(),k=_(0),C=_([]),n=J({userId:"",rec:"",model:"",page:1,size:10}),V=_([]);async function u(){p.value=!0;try{const r=await D.queryDrawAll(n),{rows:l,count:i}=r.data;p.value=!1,k.value=i,V.value=l}catch{p.value=!1}}async function M(r){const l=await D.recDrawImg({id:r});G.success(l.data),u()}async function N(r){const l=await X.queryAllUser({size:30,username:r});C.value=l.data.rows}function R(r){r==null||r.resetFields(),u()}return Q(()=>{u()}),(r,l)=>{const i=s("el-option"),y=s("el-select"),m=s("el-form-item"),w=s("el-button"),L=s("el-form"),x=F,T=s("el-image"),q=s("el-tag"),B=s("Plus"),z=s("el-icon"),O=s("Minus"),P=s("el-pagination"),j=s("el-row"),E=Y("loading");return o(),c("div",null,[a(x,null,{default:t(()=>[a(L,{ref_key:"formRef",ref:b,inline:!0,model:n},{default:t(()=>[a(m,{label:"用户名称",prop:"userId"},{default:t(()=>[a(y,{modelValue:n.userId,"onUpdate:modelValue":l[0]||(l[0]=e=>n.userId=e),filterable:"",clearable:"",remote:"","reserve-keyword":"",placeholder:"用户姓名[模糊搜索]","remote-show-suffix":"","remote-method":N},{default:t(()=>[(o(!0),c(f,null,v(C.value,e=>(o(),d(i,{key:e.id,label:e.username,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(m,{label:"用户状态",prop:"rec"},{default:t(()=>[a(y,{modelValue:n.rec,"onUpdate:modelValue":l[1]||(l[1]=e=>n.rec=e),placeholder:"请选择用户状态",clearable:""},{default:t(()=>[(o(!0),c(f,null,v(I(H),e=>(o(),d(i,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(m,{label:"用户状态",prop:"model"},{default:t(()=>[a(y,{modelValue:n.model,"onUpdate:modelValue":l[2]||(l[2]=e=>n.model=e),placeholder:"请选择绘画模型",clearable:""},{default:t(()=>[(o(!0),c(f,null,v(I(K),e=>(o(),d(i,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(m,null,{default:t(()=>[a(w,{type:"primary",onClick:u},{default:t(()=>[g(" 查询 ")]),_:1}),a(w,{onClick:l[3]||(l[3]=e=>R(b.value))},{default:t(()=>[g(" 重置 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),W((o(),d(x,{style:{width:"100%"}},{default:t(()=>[U("div",Z,[(o(!0),c(f,null,v(V.value,e=>(o(),c("div",{key:e.id,class:"draw_img_container flex"},[a(T,{"preview-src-list":[e.answer],src:e.answer,lazy:"",class:"ml-1 mt-2 draw_img","hide-on-click-modal":""},null,8,["preview-src-list","src"]),U("div",ee,[a(q,{class:"ml-2",type:e.rec?"success":"info"},{default:t(()=>[g(h(e.rec?"已推荐":"未推荐"),1)]),_:2},1032,["type"]),a(w,{type:"warning",plain:"",size:"small",onClick:te=>M(e.id)},{default:t(()=>[g(h(e.rec?"取消收藏":"加入推荐")+" ",1),e.rec?A("",!0):(o(),d(z,{key:0},{default:t(()=>[a(B)]),_:1})),e.rec?(o(),d(z,{key:1},{default:t(()=>[a(O)]),_:1})):A("",!0)]),_:2},1032,["onClick"])])]))),128))]),a(j,{class:"flex justify-end mt-5"},{default:t(()=>[a(P,{"current-page":n.page,"onUpdate:currentPage":l[4]||(l[4]=e=>n.page=e),"page-size":n.size,"onUpdate:pageSize":l[5]||(l[5]=e=>n.size=e),class:"mr-5","page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper",total:k.value,onSizeChange:u,onCurrentChange:u},null,8,["current-page","page-size","total"])]),_:1})]),_:1})),[[E,p.value]])])}}});typeof S=="function"&&S(le);export{le as default};
