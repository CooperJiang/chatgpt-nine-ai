
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{_ as q}from"./index-56b33bff.js";import{a as V}from"./config-5d6224e3.js";import{d as M,Q as J,r as b,B as x,x as j,o as E,c as O,e,f as t,a as _,k as A,b as m,E as v,h as i,q as w}from"./index-be23d7e6.js";const I={class:"flex justify-between"},K=_("b",null,"注册设置",-1),Q=_("p",{class:"tips"}," 当前版本限制注册开启赠送，邀请人享受 30对话+5绘画 被邀请人享受 10+1 ",-1),T=M({__name:"register",setup(z){const l=J({registerSendStatus:"",registerSendChatNum:"",registerSendDrawNum:"",registerSendBalanceNum:"",firstRegisterSendStatus:0,firstRegisterSendRank:"",firstRregisterSendChatNum:"",firstRregisterSendDrawNum:"",firstRregisterSendBalanceNum:"",inviteSendStatus:1}),C=b({registerSendStatus:[{required:!0,trigger:"change",message:"请确认是否开启注册赠送"}],firstRegisterSendStatus:[{required:!0,trigger:"change",message:"请确认是否开启优先注册赠送"}],inviteSendStatus:[{required:!0,trigger:"change",message:"请确认是否开启邀请注册赠送"}]}),p=b();async function c(){const s=await V.queryConfig({keys:["registerSendStatus","registerSendChatNum","registerSendDrawNum","registerSendBalanceNum","firstRegisterSendStatus","firstRegisterSendRank","firstRregisterSendChatNum","firstRregisterSendDrawNum","firstRregisterSendBalanceNum"]});s.data.firstRegisterSendStatus&&(s.data.firstRegisterSendStatus=Number(s.data.firstRegisterSendStatus)),s.data.registerSendStatus&&(s.data.registerSendStatus=Number(s.data.registerSendStatus)),Object.assign(l,s.data)}function y(){var s;(s=p.value)==null||s.validate(async r=>{if(r){try{await V.setConfig({settings:B(l)}),v.success("变更配置信息成功")}catch{}c()}else v.error("请填写完整信息")})}function B(s){return Object.keys(s).map(r=>({configKey:r,configVal:s[r]}))}const f=x(()=>[{required:l.firstRegisterSendStatus,message:"开启优先注册赠送选项后需填写此项",trigger:"blur"}]),g=x(()=>[{required:l.registerSendStatus,message:"开启注册赠送选项后需填写此项",trigger:"blur"}]);return j(()=>{c()}),(s,r)=>{const R=i("el-alert"),h=q,k=i("el-button"),S=i("el-switch"),d=i("el-form-item"),n=i("el-col"),u=i("el-row"),o=i("el-input"),N=i("el-divider"),U=i("el-form"),D=i("el-card");return E(),O("div",null,[e(h,null,{default:t(()=>[e(R,{closable:!1,"show-icon":"",title:"注册设置说明",description:"可以设置注册赠送的默认额度、包含对话次数、普通绘画额度、MJ绘画额度、并且可以设置前x名用户获得更多额度、当前版本默认开启邀请赠送、且暂时不能手动关闭、请稍等版本更新！",type:"warning"})]),_:1}),e(D,{style:{margin:"20px"}},{header:t(()=>[_("div",I,[K,e(k,{class:"button",text:"",onClick:y},{default:t(()=>[A(" 保存设置 ")]),_:1})])]),default:t(()=>[e(U,{ref_key:"formRef",ref:p,rules:C.value,model:l,"label-width":"140px"},{default:t(()=>[e(u,null,{default:t(()=>[e(n,{xs:24,md:20,lg:15,xl:12},{default:t(()=>[e(d,{label:"是否开启注册赠送",prop:"registerSendStatus"},{default:t(()=>[e(S,{modelValue:l.registerSendStatus,"onUpdate:modelValue":r[0]||(r[0]=a=>l.registerSendStatus=a),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(n,{xs:24,md:20,lg:15,xl:12},{default:t(()=>[e(d,{label:"注册赠送对话额度",prop:"registerSendChatNum",rules:m(g)},{default:t(()=>[e(o,{modelValue:l.registerSendChatNum,"onUpdate:modelValue":r[1]||(r[1]=a=>l.registerSendChatNum=a),placeholder:"首次注册赠送对话额度",clearable:""},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(n,{xs:24,md:20,lg:15,xl:12},{default:t(()=>[e(d,{label:"注册赠送绘画额度",prop:"registerSendDrawNum",rules:m(g)},{default:t(()=>[e(o,{modelValue:l.registerSendDrawNum,"onUpdate:modelValue":r[2]||(r[2]=a=>l.registerSendDrawNum=a),placeholder:"首次注册赠送绘画额度",clearable:""},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(n,{xs:24,md:20,lg:15,xl:12},{default:t(()=>[e(d,{label:"注册赠送MJ次数",prop:"registerSendBalanceNum",rules:m(g)},{default:t(()=>[e(o,{modelValue:l.registerSendBalanceNum,"onUpdate:modelValue":r[3]||(r[3]=a=>l.registerSendBalanceNum=a),placeholder:"首次注册赠送MJ次数",clearable:""},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1})]),_:1}),e(N),e(u,null,{default:t(()=>[e(n,{xs:24,md:20,lg:15,xl:12},{default:t(()=>[e(d,{label:"开启优先注册赠送",prop:"firstRegisterSendStatus"},{default:t(()=>[e(S,{modelValue:l.firstRegisterSendStatus,"onUpdate:modelValue":r[4]||(r[4]=a=>l.firstRegisterSendStatus=a),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(n,{xs:24,md:20,lg:15,xl:12},{default:t(()=>[e(d,{label:"前多少名获得奖励",prop:"firstRegisterSendRank",rules:m(f)},{default:t(()=>[e(o,{modelValue:l.firstRegisterSendRank,"onUpdate:modelValue":r[5]||(r[5]=a=>l.firstRegisterSendRank=a),placeholder:"设置优先注册前N名可以获得奖励",clearable:""},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(n,{xs:24,md:20,lg:15,xl:12},{default:t(()=>[e(d,{label:"优先赠送对话额度",prop:"firstRregisterSendChatNum",rules:m(f)},{default:t(()=>[e(o,{modelValue:l.firstRregisterSendChatNum,"onUpdate:modelValue":r[6]||(r[6]=a=>l.firstRregisterSendChatNum=a),placeholder:"优先注册用户额外赠送对话额度",clearable:""},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(n,{xs:24,md:20,lg:15,xl:12},{default:t(()=>[e(d,{label:"优先赠送绘画额度",prop:"firstRregisterSendDrawNum",rules:m(f)},{default:t(()=>[e(o,{modelValue:l.firstRregisterSendDrawNum,"onUpdate:modelValue":r[7]||(r[7]=a=>l.firstRregisterSendDrawNum=a),placeholder:"优先注册用户额外赠送绘画额度",clearable:""},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(n,{xs:24,md:20,lg:15,xl:12},{default:t(()=>[e(d,{label:"优先赠送MJ次数",prop:"firstRregisterSendBalanceNum",rules:m(f)},{default:t(()=>[e(o,{modelValue:l.firstRregisterSendBalanceNum,"onUpdate:modelValue":r[8]||(r[8]=a=>l.firstRregisterSendBalanceNum=a),placeholder:"优先注册用户额外赠送MJ次数",clearable:""},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1})]),_:1}),e(N),e(u,null,{default:t(()=>[e(n,{xs:24,md:20,lg:15,xl:12},{default:t(()=>[e(d,{label:"开启邀请注册赠送",prop:"inviteSendStatus"},{default:t(()=>[e(S,{modelValue:l.inviteSendStatus,"onUpdate:modelValue":r[9]||(r[9]=a=>l.inviteSendStatus=a),disabled:!0,"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(n,{xs:24,md:20,lg:15,xl:12},{default:t(()=>[Q]),_:1})]),_:1})]),_:1},8,["rules","model"])]),_:1})])}}});typeof w=="function"&&w(T);export{T as default};
