
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{d as u,r as m,x as N,D as R,o as f,c as w,O as b,G as T,b as t,n as k,P as M,a as y,t as x,J as z,k as E,u as D,e,f as s,E as I,h as c,g as L,m as A,q as V}from"./index-be23d7e6.js";import{_ as F}from"./index-56b33bff.js";const G=u({name:"FixedActionBar"}),J=u({...G,setup(i){const r=m(!1);N(()=>{n(),window.addEventListener("scroll",n)}),R(()=>{window.removeEventListener("scroll",n)});function n(){const a=document.documentElement.scrollTop||document.body.scrollTop,d=document.documentElement.clientHeight||document.body.clientHeight,o=document.documentElement.scrollHeight||document.body.scrollHeight;r.value=Math.ceil(a+d)>=o}return(a,d)=>(f(),w("div",{class:T(["actionbar",{shadow:!t(r)}]),"data-fixed-calc-width":""},[b(a.$slots,"default",{},void 0,!0)],2))}});const O=k(J,[["__scopeId","data-v-63511cc5"]]),j={class:"header"},K={class:"main"},Q={class:"title"},W={class:"content"},X={key:0,class:"sub"},Y=u({name:"PageHeader"}),Z=u({...Y,props:{title:{type:String,required:!0},content:{type:String,default:""}},setup(i){const r=M();return(n,a)=>(f(),w("div",j,[y("div",K,[y("div",Q,x(i.title),1),y("div",W,[b(n.$slots,"content",{},()=>[E(x(i.content),1)],!0)])]),t(r).default?(f(),w("div",X,[b(n.$slots,"default",{},void 0,!0)])):z("",!0)]))}});const ee=k(Z,[["__scopeId","data-v-24ce26ee"]]),oe=u({name:"PersonalEditPassword"}),te=u({...oe,setup(i){const r=L(),n=A(),a=D(),d=m(),o=m({password:"",newpassword:"",checkpassword:""}),S=m({password:[{required:!0,message:"请输入原密码",trigger:"blur"}],newpassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}],checkpassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{validator:(g,l,p)=>{l!==o.value.newpassword?p(new Error("请确认新密码")):p()}}]});function $(){d.value&&d.value.validate(g=>{g&&a.editPassword(o.value).then(()=>{I({type:"success",message:"模拟修改成功，请重新登录"}),a.logout().then(()=>{n.push({name:"login",query:{redirect:r.fullPath}})})})})}return(g,l)=>{const p=ee,h=c("el-input"),v=c("el-form-item"),H=c("el-form"),q=c("el-col"),C=c("el-row"),P=F,B=c("el-button"),U=O;return f(),w("div",null,[e(p,{title:"修改密码",content:"定期修改密码可以提高帐号安全性噢~"}),e(P,null,{default:s(()=>[e(C,null,{default:s(()=>[e(q,{md:24,lg:12},{default:s(()=>[e(H,{ref_key:"formRef",ref:d,model:t(o),rules:t(S),"label-width":"120px"},{default:s(()=>[e(v,{label:"原密码",prop:"password"},{default:s(()=>[e(h,{modelValue:t(o).password,"onUpdate:modelValue":l[0]||(l[0]=_=>t(o).password=_),type:"password",placeholder:"请输入原密码","show-password":""},null,8,["modelValue"])]),_:1}),e(v,{label:"新密码",prop:"newpassword"},{default:s(()=>[e(h,{modelValue:t(o).newpassword,"onUpdate:modelValue":l[1]||(l[1]=_=>t(o).newpassword=_),type:"password",placeholder:"请输入原密码","show-password":""},null,8,["modelValue"])]),_:1}),e(v,{label:"确认新密码",prop:"checkpassword"},{default:s(()=>[e(h,{modelValue:t(o).checkpassword,"onUpdate:modelValue":l[2]||(l[2]=_=>t(o).checkpassword=_),type:"password",placeholder:"请输入原密码","show-password":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1})]),_:1}),e(U,null,{default:s(()=>[e(B,{type:"primary",size:"large",onClick:$},{default:s(()=>[E(" 提交 ")]),_:1})]),_:1})])}}});typeof V=="function"&&V(te);export{te as default};
