'use strict';const _0x17e6cc=_0x4f89;function _0xfa4b(){const _0x1dca02=['3820APWLkO','JwtAuthGuard','165KQVzFy','extractToken','非法操作、请先登录！！！','__metadata','decorate','62024ExfkdT','getOwnPropertyDescriptor','4818005ekXehp','defineProperty','getRequest','canActivate','828eXTmNw','561790XcAwoy','authorization','@nestjs/passport','metadata','split','handleRequest','switchToHttp','function','372540sEDYhY','HttpException','@nestjs/common','843mJXyGF','verify','AuthGuard','headers','54MCrvkb','380460khGuWV','validateToken','1821JObKAx','object','design:paramtypes','length','1032evMRWP','UnauthorizedException','HttpStatus','UNAUTHORIZED','__esModule','Bearer','572uePxwo','jsonwebtoken','__decorate'];_0xfa4b=function(){return _0x1dca02;};return _0xfa4b();}(function(_0x1463a8,_0x4dfe11){const _0x1bc057=_0x4f89,_0x378992=_0x1463a8();while(!![]){try{const _0xacc74f=parseInt(_0x1bc057(0xab))/0x1*(parseInt(_0x1bc057(0x82))/0x2)+-parseInt(_0x1bc057(0xa4))/0x3*(parseInt(_0x1bc057(0x8b))/0x4)+-parseInt(_0x1bc057(0x94))/0x5+-parseInt(_0x1bc057(0xa8))/0x6*(parseInt(_0x1bc057(0xa1))/0x7)+parseInt(_0x1bc057(0x92))/0x8*(parseInt(_0x1bc057(0x98))/0x9)+-parseInt(_0x1bc057(0x99))/0xa*(parseInt(_0x1bc057(0x8d))/0xb)+-parseInt(_0x1bc057(0xa9))/0xc*(-parseInt(_0x1bc057(0x88))/0xd);if(_0xacc74f===_0x4dfe11)break;else _0x378992['push'](_0x378992['shift']());}catch(_0x568695){_0x378992['push'](_0x378992['shift']());}}}(_0xfa4b,0x78ae7));function _0x4f89(_0x455ca4,_0x5c7ba9){const _0xfa4b2a=_0xfa4b();return _0x4f89=function(_0x4f8940,_0xf22338){_0x4f8940=_0x4f8940-0x7f;let _0x5f244f=_0xfa4b2a[_0x4f8940];return _0x5f244f;},_0x4f89(_0x455ca4,_0x5c7ba9);}var __decorate=this&&this[_0x17e6cc(0x8a)]||function(_0x47d3bd,_0xfc6ec8,_0x4d228c,_0x652811){const _0x2b04fe=_0x17e6cc;var _0x43c6a9=arguments[_0x2b04fe(0x81)],_0x4933bb=_0x43c6a9<0x3?_0xfc6ec8:_0x652811===null?_0x652811=Object[_0x2b04fe(0x93)](_0xfc6ec8,_0x4d228c):_0x652811,_0x52cfb6;if(typeof Reflect===_0x2b04fe(0x7f)&&typeof Reflect[_0x2b04fe(0x91)]===_0x2b04fe(0xa0))_0x4933bb=Reflect[_0x2b04fe(0x91)](_0x47d3bd,_0xfc6ec8,_0x4d228c,_0x652811);else{for(var _0x1e91b3=_0x47d3bd[_0x2b04fe(0x81)]-0x1;_0x1e91b3>=0x0;_0x1e91b3--)if(_0x52cfb6=_0x47d3bd[_0x1e91b3])_0x4933bb=(_0x43c6a9<0x3?_0x52cfb6(_0x4933bb):_0x43c6a9>0x3?_0x52cfb6(_0xfc6ec8,_0x4d228c,_0x4933bb):_0x52cfb6(_0xfc6ec8,_0x4d228c))||_0x4933bb;}return _0x43c6a9>0x3&&_0x4933bb&&Object[_0x2b04fe(0x95)](_0xfc6ec8,_0x4d228c,_0x4933bb),_0x4933bb;},__metadata=this&&this[_0x17e6cc(0x90)]||function(_0x59c2e9,_0x5d45f1){const _0x100489=_0x17e6cc;if(typeof Reflect===_0x100489(0x7f)&&typeof Reflect[_0x100489(0x9c)]===_0x100489(0xa0))return Reflect['metadata'](_0x59c2e9,_0x5d45f1);};Object[_0x17e6cc(0x95)](exports,_0x17e6cc(0x86),{'value':!![]}),exports[_0x17e6cc(0x8c)]=void 0x0;const common_1=require(_0x17e6cc(0xa3)),passport_1=require(_0x17e6cc(0x9b)),jwt=require(_0x17e6cc(0x89));let JwtAuthGuard=class JwtAuthGuard extends(0x0,passport_1[_0x17e6cc(0xa6)])('jwt'){constructor(){super();}async[_0x17e6cc(0x97)](_0x285680){const _0x2cb7c6=_0x17e6cc,_0x3e0eaf=_0x285680[_0x2cb7c6(0x9f)]()[_0x2cb7c6(0x96)](),_0x208cfa=this[_0x2cb7c6(0x8e)](_0x3e0eaf);return _0x3e0eaf['user']=this[_0x2cb7c6(0xaa)](_0x208cfa),!![];}[_0x17e6cc(0x8e)](_0x8be980){const _0x1b18eb=_0x17e6cc;if(!_0x8be980[_0x1b18eb(0xa7)][_0x1b18eb(0x9a)])return null;const _0x1d665e=_0x8be980[_0x1b18eb(0xa7)][_0x1b18eb(0x9a)][_0x1b18eb(0x9d)]('\x20');if(_0x1d665e[_0x1b18eb(0x81)]!==0x2||_0x1d665e[0x0]!==_0x1b18eb(0x87))return null;return _0x1d665e[0x1];}['validateToken'](_0x5b7e05){const _0x4d95a4=_0x17e6cc;try{return jwt[_0x4d95a4(0xa5)](_0x5b7e05,process['env']['JWT_SECRET']);}catch(_0x42aa25){throw new common_1[(_0x4d95a4(0xa2))](_0x4d95a4(0x8f),common_1[_0x4d95a4(0x84)][_0x4d95a4(0x85)]);}}[_0x17e6cc(0x9e)](_0x58b089,_0x5065c4,_0x20eb7c){const _0x2a5370=_0x17e6cc;if(_0x58b089||!_0x5065c4)throw _0x58b089||new common_1[(_0x2a5370(0x83))]();return _0x5065c4;}};JwtAuthGuard=__decorate([(0x0,common_1['Injectable'])(),__metadata(_0x17e6cc(0x80),[])],JwtAuthGuard),exports[_0x17e6cc(0x8c)]=JwtAuthGuard;