'use strict';const _0x52e9c8=_0x5cff;(function(_0x15836b,_0x2bb9be){const _0x299bc3=_0x5cff,_0xc6c643=_0x15836b();while(!![]){try{const _0x2eebaa=parseInt(_0x299bc3(0x203))/0x1*(parseInt(_0x299bc3(0x1d7))/0x2)+parseInt(_0x299bc3(0x1d2))/0x3+parseInt(_0x299bc3(0x1e9))/0x4+parseInt(_0x299bc3(0x201))/0x5+-parseInt(_0x299bc3(0x1ff))/0x6*(parseInt(_0x299bc3(0x1c6))/0x7)+parseInt(_0x299bc3(0x1bb))/0x8*(parseInt(_0x299bc3(0x1f1))/0x9)+-parseInt(_0x299bc3(0x215))/0xa;if(_0x2eebaa===_0x2bb9be)break;else _0xc6c643['push'](_0xc6c643['shift']());}catch(_0x5aa62d){_0xc6c643['push'](_0xc6c643['shift']());}}}(_0x5da3,0xbf000));var __decorate=this&&this[_0x52e9c8(0x20f)]||function(_0x1b85aa,_0x217748,_0x569023,_0x521e76){const _0x2f335d=_0x52e9c8;var _0x286e5d=arguments[_0x2f335d(0x20a)],_0x25ced0=_0x286e5d<0x3?_0x217748:_0x521e76===null?_0x521e76=Object[_0x2f335d(0x216)](_0x217748,_0x569023):_0x521e76,_0x1c40d1;if(typeof Reflect===_0x2f335d(0x1f6)&&typeof Reflect[_0x2f335d(0x1e6)]===_0x2f335d(0x20d))_0x25ced0=Reflect['decorate'](_0x1b85aa,_0x217748,_0x569023,_0x521e76);else{for(var _0x41b37c=_0x1b85aa[_0x2f335d(0x20a)]-0x1;_0x41b37c>=0x0;_0x41b37c--)if(_0x1c40d1=_0x1b85aa[_0x41b37c])_0x25ced0=(_0x286e5d<0x3?_0x1c40d1(_0x25ced0):_0x286e5d>0x3?_0x1c40d1(_0x217748,_0x569023,_0x25ced0):_0x1c40d1(_0x217748,_0x569023))||_0x25ced0;}return _0x286e5d>0x3&&_0x25ced0&&Object[_0x2f335d(0x1ed)](_0x217748,_0x569023,_0x25ced0),_0x25ced0;},__metadata=this&&this[_0x52e9c8(0x1f2)]||function(_0x5c62b6,_0x7e001){const _0x43c3e2=_0x52e9c8;if(typeof Reflect===_0x43c3e2(0x1f6)&&typeof Reflect[_0x43c3e2(0x1c5)]===_0x43c3e2(0x20d))return Reflect['metadata'](_0x5c62b6,_0x7e001);};Object[_0x52e9c8(0x1ed)](exports,'__esModule',{'value':!![]}),exports[_0x52e9c8(0x1d5)]=void 0x0;function _0x5cff(_0x32d587,_0x1ff381){const _0x5da358=_0x5da3();return _0x5cff=function(_0x5cff01,_0x12fc07){_0x5cff01=_0x5cff01-0x1b8;let _0x5792bc=_0x5da358[_0x5cff01];return _0x5792bc;},_0x5cff(_0x32d587,_0x1ff381);}function _0x5da3(){const _0x384f1b=['123456','log','registerVerifyEmailDesc','createDefaultUser','registerVerifyEmailFrom','join','registerSuccessEmailTitle','openaiBaseUrl','connection','query','927898639','decorate','INSERT\x20INTO\x20config\x20(configKey,\x20configVal,\x20public,\x20encry)\x20VALUES\x20','\x27,\x20\x27','3242344wANrHo','replace','design:paramtypes','Logger','defineProperty','bcryptjs','https://www.aoxfaka.com//links/823E2E19','NineTeam团队账号激活成功','4300488wFbQcP','__metadata','创建默认网站配置失败！','Connection','@nestjs/common','object','nine-super','INTERNAL_SERVER_ERROR','encry','NineTeam账号激活失败','用户成功、用户名为[','baiduSiteId','registerSuccessEmaileAppend','buyCramiAddress','102SvagaS',',请妥善保管您的账号，我们将为您赠送50次对话额度和5次绘画额度、祝您使用愉快','6430720tBfASZ','baiduCode','204218kOkXpu','registerSendBalanceNum','NineTeam团队','qqNumber','hashSync','HttpException','registerSendStatus','length','创建默认超级管理员失败！','\x0a\x20\x20SELECT\x20COUNT(*)\x20AS\x20count\x20FROM\x20config\x20WHERE\x20`configKey`\x20IN\x20(','function','https://public-1300678944.cos.ap-shanghai.myqcloud.com/blog/1682571295452image.png','__decorate','\x0a\x20\x20<script>\x0a\x20\x20var\x20_hmt\x20=\x20_hmt\x20||\x20[];\x0a\x20\x20(function()\x20{\x0a\x20\x20\x20\x20var\x20hm\x20=\x20document.createElement(\x22script\x22);\x0a\x20\x20\x20\x20hm.src\x20=\x20\x22https://hm.baidu.com/hm.js?cb8c9a3bcadbc200e950b05f9c61a385\x22;\x0a\x20\x20\x20\x20var\x20s\x20=\x20document.getElementsByTagName(\x22script\x22)[0];\x0a\x20\x20\x20\x20s.parentNode.insertBefore(hm,\x20s);\x0a\x20\x20})();\x0a\x20\x20</script>\x0a','500','map','noticeInfo','NineTeam团队账号验证','33262930SPqlpy','getOwnPropertyDescriptor','configVal','欢迎使用Nine\x20Team团队的产品服务,请在五分钟内完成你的账号激活,点击以下按钮激活您的账号，','public','checkSiteBaseConfig','checkSuperAdmin','8RoYkxt','registerSendChatNum','typeorm','registerFailEmailTeamName','SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27super\x27','INSERT\x20INTO\x20users\x20(username,\x20password,\x20status,\x20email,\x20role)\x20VALUES\x20(\x27','defaultAdmin@cooper.com','super','https://api.openai.com','J_longyan','metadata','273623HMOMVO','baiduToken','registerSendDrawNum','HttpStatus','\x0a\x20\x20\x20\x20\x20\x20###\x20欢迎使用NineAi\x0a\x20\x20\x20\x20\x20\x20当前是栏目是公高系统、前往后台管理\x20=>\x20系统设置\x20=>\x20公告设置、可以自由编辑、支持**md格式**、**html格式**自由发挥、如果您配置了存储设置、粘贴图片即可完成图片上传！\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20项目已经开源：欢迎您的使用体验：\x20[chatgpt-nine-ai](https://github.com/longyanjiang/chatgpt-nine-ai)\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20###\x20项目基础说明\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20*\x20项目前端与后台管理基于\x20**Vue3开发**\x0a\x20\x20\x20\x20\x20\x20*\x20项目后端基于**node的nestj框架开发**\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20###\x20项目部署说明\x0a\x20\x20\x20\x20\x20\x20当前1.0开源版为了大家更快部署、将三个项目合并为一个项目、部署只需要两步、详细部署文档参考以下两个文档：\x0a\x20\x20\x20\x20\x20\x201.\x20[NineAI部署准备文档-您需要准备的东西](https://www.jiangly.com/article/detail/57)\x0a\x20\x20\x20\x20\x20\x202.\x20[NineAi开源部署文档-详细开源部署文档](https://www.jiangly.com/article/detail/58)\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20###\x20NineAi交流群\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20*\x20QQ交流群\x20757296189\x0a\x20\x20\x20\x20\x20\x20*\x20VX交流群\x20请添加作者VX进群\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20###\x20项目常见问题\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20-\x20参考部署文档或进群交流\x0a','admin','firstRegisterSendRank','vxNumber','registerVerifyEmailTitle','siteName','Injectable','1800','2307162RekllJ','registerFailEmailTitle','userDefautlAvatar','DatabaseService','初始化创建','14dUueZX','configKey','firstRregisterSendBalanceNum','error:\x20'];_0x5da3=function(){return _0x384f1b;};return _0x5da3();}const common_1=require(_0x52e9c8(0x1f5)),typeorm_1=require(_0x52e9c8(0x1bd)),bcrypt=require(_0x52e9c8(0x1ee));let DatabaseService=class DatabaseService{constructor(_0x410165){this['connection']=_0x410165;}async['onModuleInit'](){const _0x574d65=_0x52e9c8;await this[_0x574d65(0x1ba)](),await this['checkSiteBaseConfig']();}async[_0x52e9c8(0x1ba)](){const _0x2ea088=_0x52e9c8,_0x28499f=await this[_0x2ea088(0x1e3)]['query'](_0x2ea088(0x1bf));if(!_0x28499f||_0x28499f[_0x2ea088(0x20a)]===0x0){const _0x2fa00b=bcrypt[_0x2ea088(0x207)](_0x2ea088(0x1f7),0xa),_0x4c7665=bcrypt[_0x2ea088(0x207)](_0x2ea088(0x1db),0xa),_0xe126e3='default@cooper.com',_0x449779=_0x2ea088(0x1c1),_0x4f44df={'username':_0x2ea088(0x1c2),'password':_0x2fa00b,'status':0x1,'email':_0xe126e3,'sex':0x1,'role':_0x2ea088(0x1c2)},_0x3f7385={'username':_0x2ea088(0x1cb),'password':_0x4c7665,'status':0x1,'email':_0x449779,'sex':0x1,'role':_0x2ea088(0x1cb)};await this[_0x2ea088(0x1de)](_0x4f44df),await this[_0x2ea088(0x1de)](_0x3f7385);}}async['createDefaultUser'](_0x46f407){const _0x300fe9=_0x52e9c8;try{const {username:_0x5bd732,password:_0x51a010,status:_0xeb95a2,email:_0x49b37e,role:_0x4bba87}=_0x46f407,_0x4b8755=await this['connection'][_0x300fe9(0x1e4)](_0x300fe9(0x1c0)+_0x5bd732+'\x27,\x20\x27'+_0x51a010+_0x300fe9(0x1e8)+_0xeb95a2+_0x300fe9(0x1e8)+_0x49b37e+'\x27,\x20\x27'+_0x4bba87+'\x27)'),_0x3bfee8=_0x4b8755['insertId'],_0xf2ab77=await this[_0x300fe9(0x1e3)]['query']('INSERT\x20INTO\x20balance\x20(userId,\x20balance,\x20usesLeft,\x20paintCount)\x20VALUES\x20(\x27'+_0x3bfee8+'\x27,\x200,\x201000,\x20100)');common_1[_0x300fe9(0x1ec)]['log'](_0x300fe9(0x1d6)+_0x4bba87+_0x300fe9(0x1fb)+_0x5bd732+']、初始密码为[nine-super]\x20==============>\x20请注意查阅','DatabaseService');}catch(_0xe2d6cb){console[_0x300fe9(0x1dc)](_0x300fe9(0x1da),_0xe2d6cb);throw new common_1[(_0x300fe9(0x208))](_0x300fe9(0x20b),common_1[_0x300fe9(0x1c9)][_0x300fe9(0x1f8)]);}}async[_0x52e9c8(0x1b9)](){const _0x5422b3=_0x52e9c8,_0x550c05=[_0x5422b3(0x1cf),_0x5422b3(0x206),_0x5422b3(0x1cd),'robotAvatar',_0x5422b3(0x1d4)],_0x115b7c=await this['connection'][_0x5422b3(0x1e4)](_0x5422b3(0x20c)+_0x550c05[_0x5422b3(0x212)](_0xfa03fb=>'\x27'+_0xfa03fb+'\x27')['join'](',')+')\x0a'),_0x2774f0=parseInt(_0x115b7c[0x0]['count']);_0x2774f0===0x0&&await this['createBaseSiteConfig']();}async['createBaseSiteConfig'](){const _0x53b048=_0x52e9c8;try{const _0x52317e=_0x53b048(0x210),_0x1575bb=_0x53b048(0x1ca),_0x44e35c=[{'configKey':_0x53b048(0x1cf),'configVal':'Nine\x20Ai','public':0x1,'encry':0x0},{'configKey':'qqNumber','configVal':_0x53b048(0x1e5),'public':0x1,'encry':0x0},{'configKey':_0x53b048(0x1cd),'configVal':_0x53b048(0x1c4),'public':0x1,'encry':0x0},{'configKey':'robotAvatar','configVal':'','public':0x1,'encry':0x0},{'configKey':_0x53b048(0x1d4),'configVal':_0x53b048(0x20e),'public':0x0,'encry':0x0},{'configKey':_0x53b048(0x202),'configVal':_0x52317e,'public':0x1,'encry':0x0},{'configKey':_0x53b048(0x1fc),'configVal':'19024441','public':0x0,'encry':0x0},{'configKey':_0x53b048(0x1c7),'configVal':'121.062d54057b48bb141a0cb134354228ac.YG2IoVgtk8amdEUQH_Dw3V6fSki60AU0le6Y-XQ.EqEj6A','public':0x0,'encry':0x0},{'configKey':_0x53b048(0x1fe),'configVal':_0x53b048(0x1ef),'public':0x1,'encry':0x0},{'configKey':_0x53b048(0x1e2),'configVal':_0x53b048(0x1c3),'public':0x0,'encry':0x0},{'configKey':_0x53b048(0x213),'configVal':_0x1575bb,'public':0x1,'encry':0x0},{'configKey':_0x53b048(0x1ce),'configVal':_0x53b048(0x214),'public':0x0,'encry':0x0},{'configKey':_0x53b048(0x1dd),'configVal':_0x53b048(0x218),'public':0x0,'encry':0x0},{'configKey':_0x53b048(0x1df),'configVal':_0x53b048(0x205),'public':0x0,'encry':0x0},{'configKey':'registerVerifyExpir','configVal':_0x53b048(0x1d1),'public':0x0,'encry':0x0},{'configKey':_0x53b048(0x1e1),'configVal':_0x53b048(0x1f0),'public':0x0,'encry':0x0},{'configKey':'registerSuccessEmailTeamName','configVal':'NineTeam团队','public':0x0,'encry':0x0},{'configKey':_0x53b048(0x1fd),'configVal':_0x53b048(0x200),'public':0x0,'encry':0x0},{'configKey':_0x53b048(0x1d3),'configVal':_0x53b048(0x1fa),'public':0x0,'encry':0x0},{'configKey':_0x53b048(0x1be),'configVal':_0x53b048(0x205),'public':0x0,'encry':0x0},{'configKey':_0x53b048(0x209),'configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x53b048(0x1bc),'configVal':'50','public':0x1,'encry':0x0},{'configKey':_0x53b048(0x1c8),'configVal':'5','public':0x1,'encry':0x0},{'configKey':_0x53b048(0x204),'configVal':'0','public':0x1,'encry':0x0},{'configKey':'firstRegisterSendStatus','configVal':'1','public':0x1,'encry':0x0},{'configKey':_0x53b048(0x1cc),'configVal':_0x53b048(0x211),'public':0x1,'encry':0x0},{'configKey':'firstRregisterSendChatNum','configVal':'50','public':0x1,'encry':0x0},{'configKey':'firstRregisterSendDrawNum','configVal':'5','public':0x1,'encry':0x0},{'configKey':_0x53b048(0x1d9),'configVal':'0','public':0x1,'encry':0x0},{'configKey':'inviteSendStatus','configVal':'1','public':0x1,'encry':0x0}],_0xc59bd8=await this[_0x53b048(0x1e3)]['query'](_0x53b048(0x1e7)+_0x44e35c[_0x53b048(0x212)](_0x11448b=>'(\x27'+_0x11448b[_0x53b048(0x1d8)]+_0x53b048(0x1e8)+_0x11448b[_0x53b048(0x217)][_0x53b048(0x1ea)](/'/g,'\x5c\x27')+'\x27,\x20\x27'+_0x11448b[_0x53b048(0x1b8)]+_0x53b048(0x1e8)+_0x11448b[_0x53b048(0x1f9)]+'\x27)')[_0x53b048(0x1e0)](',\x20'));common_1['Logger'][_0x53b048(0x1dc)]('初始化网站配置信息成功、如您需要修改网站配置信息，请前往管理系统系统配置设置\x20==============>\x20请注意查阅','DatabaseService');}catch(_0x34a3f3){console[_0x53b048(0x1dc)](_0x53b048(0x1da),_0x34a3f3);throw new common_1[(_0x53b048(0x208))](_0x53b048(0x1f3),common_1[_0x53b048(0x1c9)]['INTERNAL_SERVER_ERROR']);}}};DatabaseService=__decorate([(0x0,common_1[_0x52e9c8(0x1d0)])(),__metadata(_0x52e9c8(0x1eb),[typeorm_1[_0x52e9c8(0x1f4)]])],DatabaseService),exports[_0x52e9c8(0x1d5)]=DatabaseService;